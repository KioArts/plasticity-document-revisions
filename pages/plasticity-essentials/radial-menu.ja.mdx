import VideoPlayer from '/components/VideoPlayer';
import { Tabs } from 'nextra/components'

# Radial Menu（ラジアルメニュー）

ラジアルメニューは、コマンドを実行するための円形のインターフェースです。Plasticityで利用可能なすべてのコマンドを実行できます。デフォルトでは、「Selection mode」と「Viewport settings」という2つのラジアルメニューがあります。さらに、ユーザーは独自のラジアルメニューを作成することもできます。

![Radial Menu](/img/radial-menu.png)

## ラジアルメニューのセットアップ

デフォルトの「Selection mode」と「Viewport settings」ラジアルメニューを使用するには、いくつかの設定が必要です。

1. 以下の2つのファイルをダウンロードしてください。クリックするとテキストの内容が表示されます。右上の"ダウンロード"をクリックしてください。 
    - [selection-mode.radial.json](https://app.box.com/s/xrh5xjepvcio33fvmy4thbc00ady5p4k)
    - [viewport-settings.radial.json](https://app.box.com/s/g9hlphfr4shjhkf2c5gfdknnxudq8ouu)
2. ダウンロードしたファイルをPlasticityの3Dビューポートにドロップします。
3. 画面上に変化はありませんが、ラジアルメニューの定義が読み込まれて使用する準備ができています。

ラジアルメニューにアクセスするためのショートカットを割り当てる必要があります。

4. <kbd>F</kbd>キーを押して、コマンドパレットを開きます。
5. コマンドパレットに「menu」と入力します。そうすると、「Radial Menu: Selection Mode」と「Radial Menu: Viewport Settings」のエントリが表示されます。
6. 「Radial Menu: Selection Mode」を右クリックして、ショートカットを割り当てます。ショートカットの割り当て方法については、[このセクション](command-palette#assign-a-shortcut)を参照してください。
7. 「Radial Menu: Viewport Settings」を右クリックして、ショートカットを割り当てます。
8. 割り当てたショートカットを押すことで、作成したラジアルメニューを表示できます。

## ラジアルメニューの使用方法

他のコマンドと同様に、ショートカットを押してラジアルメニューを表示します。

1. 事前に設定したショートカットを押します。
2. カーソルを中心にラジアルメニューが表示されます。
3. メニューの項目をクリックすると、コマンドが実行されます。
4. または、ショートカットキーを押したまま、項目にカーソルを合わせて、キーを離すと、コマンドが実行されます。

<VideoPlayer fileName="radial-menu"/>

## 新しいラジアルメニューの作成

任意のコマンドでラジアルメニューを作成できます。メニューの名前とそのコマンドはテキストファイルで設定されます。<br />
例として、"Spline Curve"、"Bridge"、および"Lock Selected"を含む"My Menu"ラジアルメニューをデザインし、ショートカット<kbd>Ctrl + Shift + F</kbd>でアクセスできるようにします。

1. テキストエディタを開き、新しいドキュメントを作成します。
2. ドキュメントを「mymenu.radial.json」というファイル名で保存します。
3. 次の内容を入力します：

```json filename="mymenu.radial.json" copy 
{
    "name": "My Menu",
    "command": "your-name:mymenu",
    "items": [
        {
            "command": "command:curve",
            "icon": "curve",
            "label": "Curve"
        },
        {
            "command": "command:bridge",
            "icon": "bridge",
            "label": "Bridge"
        },
        {
            "command": "command:lock-selected",
            "icon": "lock-selected",
            "label": "Lock Selected"
        }
    ]
}
```

説明：（//で始まる説明は参考のためだけにあり、実際のファイルには含めないでください）
- **name:** ラジアルメニューのタイトルを表します。任意の名前を選択できます。コマンドパレットに表示され、「Radial Menu: (name)」の形式になります。
- **command:** ラジアルメニューの一意の識別子です。既存のコマンドとの競合を避けるために、作者の名前などのユニークな要素を取り入れることを検討してください。
- **items:** ラジアルメニューに統合されるコマンドのリストです。複数のコマンドを含めることができます。
    - **command:** 組み込むコマンドの内部名称です。これらの指定のリストは[こちら](#internal-designation-for-the-command)で見ることができます。
    - **icon:** ラジアルメニューに表示されるアイコンを示します。プリセットのアイコンがないコマンドもあることに注意してください。
    - **label:** ラジアルメニューの中心に表示されるラベルです。対応するアイコンがない場合、ラベルの最初の2文字が表示されます。

```json
{
    "name": "My Menu",      // Represents the radial menu's title
    "command": "your-name:mymenu",   // A unique identifier for the radial menu
    "items": [
        {
            "command": "command:curve",  // The internal designation for the command to be incorporated
            "icon": "curve",             // Denotes the icon that appears in the radial menu
            "label": "Curve"             // The central label in the radial menu
        },
        ...
    ]
}
```

4. ファイルを保存します。
5. 作成したファイルをPlasticityの3Dビューポートにドロップします。
6. 画面上に変化はありませんが、ラジアルメニューの定義が読み込まれて使用する準備ができています。
7. <kbd>F</kbd>キーを押して、コマンドパレットを開きます。
8. コマンドパレットに「menu」と入力すると、読み込まれたラジアルメニューの一覧が表示されます。
9. 「Radial Menu: My Menu」を右クリックして、ショートカット<kbd>Ctrl + Shift + F</kbd>を割り当てます。ショートカットの割り当て方法については、[このセクション](command-palette#assign-a-shortcut)を参照してください。
10. これで、ショートカット<kbd>Ctrl + Shift + F</kbd>を押すことで、作成したラジアルメニューを表示できます。

## ラジアルメニューの編集

設定のために作成したファイルは、Plasticityの設定フォルダーに保存されています。このファイルを編集することで、ラジアルメニューを編集できます。

1. 設定フォルダーを開きます
<Tabs items={['Windows', 'macOS', 'Linux']}>
    <Tabs.Tab>
    `C:\Users\<user name>\.plasticity\radials` を開きます。
    </Tabs.Tab>
    <Tabs.Tab>
    不可視フォルダを表示する設定にしてください。<br />
    `/Users/<user name>/.plasticity/radials/` を開きます。
    </Tabs.Tab>
    <Tabs.Tab>
    Plasticityの設定フォルダーを開きます。
    </Tabs.Tab>
</Tabs>
2. フォルダ内に設定ファイルがあります。このファイルをテキストエディタで開きます。
3. 新規作成時と同じ要領で、ファイルを編集します。
4. ファイルを保存します。
5. 保存したファイルを、Plasticityの3Dビューポートにドロップします。
6. これで設定し直したラジアルメニューが使用できるようになります。

## ラジアルメニューの削除

Plasticityの設定フォルダーにあるファイルを削除することで、ラジアルメニューを削除できます。

1. 設定フォルダーを開きます
<Tabs items={['Windows', 'macOS', 'Linux']}>
    <Tabs.Tab>
    `C:\Users\<user name>\.plasticity\radials` を開きます。
    </Tabs.Tab>
    <Tabs.Tab>
    不可視フォルダを表示する設定にしてください。<br />
    `/Users/<user name>/.plasticity/radials/` を開きます。
    </Tabs.Tab>
    <Tabs.Tab>
    Plasticityの設定フォルダーを開きます。
    </Tabs.Tab>
</Tabs>
2. フォルダ内に設定用ファイルがあります。削除したいファイルをフォルダから取り出すと、ラジアルメニューが削除されます。


## ラジアルメニューからラジアルメニューを呼び出す方法

1. 呼び出されるラジアルメニューを作成します。ここではこのようなラジアルメニューを定義しました。
```json filename="2nd-my-menu.radial.json" copy 
{
    "name": "2nd My Menu",
    "command": "2nd-my-menu",
    "items": [
        {
            "command": "command:center-box",
            "icon": "center-box",
            "label": "Center Box"
        },
        {
            "command": "command:cylinder",
            "icon": "cylinder",
            "label": "Cylinder"
        },
        {
            "command": "command:sphere",
            "icon": "sphere",
            "label": "Sphere"
        }
    ]
}
```

2. このラジアルメニューを「Selection mode」ラジアルメニューから呼び出すには、itemsの最後に次の項目を追加します。この項目のcommandには、呼び出されるラジアルメニューのcommandの前に"view:radial:"を付け足した言葉を指定します。

```json  copy 
{
    "command": "view:radial:2nd-my-menu",
    "icon": "2nd",
    "label": "2nd"
}
```
その結果、selection-mode.radial.jsonはこのようになります

```json  filename="selection-mode.radial.json" copy 
{
    "name": "Selection mode",
    "command": "selection:mode",
    "items": [
        {
            "command": "selection:mode:set:control-point",
            "icon": "control-point",
            "label": "Control Point"
        },
        {
            "command": "selection:mode:set:solid",
            "icon": "solid",
            "label": "Solid"
        },
        {
            "command": "selection:mode:set:edge",
            "icon": "edge",
            "label": "Edge"
        },
        {
            "command": "selection:mode:set:face",
            "icon": "face",
            "label": "Face"
        },
        {
            "command": "view:radial:2nd-my-menu",
            "icon": "2nd",
            "label": "2nd"
        }
    ]
}
```

これで「Selection mode」ラジアルメニューから、「2nd My Menu」ラジアルメニューを呼び出すことができるようになります。



### 組み込むコマンドの内部名称

```
1. Commands

command:alternative-duplicate
command:boolean
command:bridge
command:bridge-curve
command:bridge-surface
command:center-box
command:center-circle
command:center-point-arc
command:center-rectangle
command:check
command:complete-edge
command:constrained-surface
command:control-point-curve
command:convert-vertex
command:copy-with-placement
command:corner-box
command:corner-rectangle
command:create-outline
command:create-viewspace-construction-plane
command:create-viewspace-construction-plane-at-origin
command:curve
command:curve-array
command:cut
command:cut-curve
command:cylinder
command:deform
command:delete
command:delete-redundant-topology
command:deselect-all
command:dimension
command:dissolve
command:draft-face
command:duplicate
command:export-obj
command:export-stl
command:export3mf
command:extend
command:extrude
command:fillet
command:fillet-shell
command:find-boundary-edges
command:freestyle-mirror
command:freestyle-move
command:freestyle-offset-planar-curve
command:freestyle-rotate
command:freestyle-scale
command:group-selected
command:hide-selected
command:hide-unselected
command:hollow
command:imprint
command:insert-knot
command:invert-hidden
command:invert-selection
command:isolate
command:isoparam
command:join
command:line
command:lock-selected
command:loft
command:loft-guide
command:match-face
command:measure
command:mirror
command:move
command:offset-curve
command:paste-with-placement
command:patch
command:pipe
command:place
command:polygon
command:project
command:push-face
command:radial-array
command:raise-degree
command:rebuild
command:rectangular-array
command:remove-fillets-from-shell
command:remove-material
command:remove-nominal-surface
command:reverse
command:revolve
command:rotate
command:scale
command:section-analysis
command:select-adjacent
command:select-all
command:select-all-curves
command:select-next-entity-collection
command:select-previous-entity-collection
command:set-material
command:slide
command:smart-command
command:sphere
command:spiral
command:split-segment
command:square
command:subdivide
command:sweep
command:sweep-tool
command:tangent-arc
command:tangent-circle
command:text
command:thicken
command:three-point-arc
command:three-point-box
command:three-point-circle
command:three-point-rectangle
command:toggle-points
command:trim
command:two-point-circle
command:ungroup-selected
command:unhide-all
command:unisolate
command:unjoin
command:untrim
command:unwrap-face
command:xnurbs

2. Construction Plane

command:create-viewspace-construction-plane
command:create-viewspace-construction-plane-at-origin
viewport:cplane:reset
viewport:cplane:selection

3. File 

file:export
file:import
file:new
file:open
file:save-version
file:save
file:save-as
file:save-as-startup

4. Snaps

viewport:grid:decr
viewport:grid:incr
snaps:toggle-grid
snaps:toggle-snap

5. Misc.

app:new-window
app:quit
edit:repeat-last-command
view:sidebar:toggle-left
view:sidebar:toggle-right

6. Radial Menus

view:radial:radial:cplanes
view:radial:viewport:points
view:radial:viewport:settings

7. Selection

selection:mode:set:all
selection:mode:set:control-point
selection:mode:set:edge
selection:mode:set:face
selection:mode:set:solid
selection:convert:control-point
selection:convert:edge
selection:convert:face
selection:convert:group-children
selection:convert:solid
selection:toggle:control-point
selection:toggle:edge
selection:toggle:face
selection:toggle:solid

8. Viewport

viewport:focus
viewport:navigate:back
viewport:navigate:bottom
viewport:navigate:front
viewport:navigate:left
viewport:navigate:right
viewport:navigate:selection
viewport:navigate:top
viewport:toggle-edges
viewport:toggle-faces
viewport:toggle-orthographic
viewport:toggle-overlays
viewport:toggle-render-mode
viewport:toggle-x-ray
```